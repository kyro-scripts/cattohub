-- Roblox Script Hub - Premium Edition
-- Auto-detects games and displays appropriate scripts

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

-- Game Database
local GameDatabase = {
    ["5938036553"] = {
        Name = "Frontlines",
        Version = "Multiple Versions Available",
        Scripts = {
            {
                Name = "Legacy Script",
                Description = "Original legacy version - Classic features",
                Code = function()
                    loadstring(game:HttpGet('https://raw.githubusercontent.com/vexascripts/Roblox-Scripts/refs/heads/main/FRONTLINES'))()
                end
            },
            {
                Name = "Stable Script",
                Description = "Stable release - Recommended for most users",
                Code = function()
                    loadstring(game:HttpGet('https://github.com/catto-kyro/frontlines/raw/refs/heads/main/aimbot'))()
                end
            },
            {
                Name = "Beta Script",
                Description = "Beta version - Latest features, may be unstable",
                Code = function()
                    loadstring(game:HttpGet('https://raw.githubusercontent.com/kyro-scripts/cattohub/main/beta'))()
                end
            }
        }
    },
    ["136372246050123"] = {
        Name = "Stick Battles",
        Version = "Stable",
        Scripts = {
            {
                Name = "Main Script",
                Description = "Full featured Stick Battles script",
                Code = function()
                    loadstring(game:HttpGet('https://raw.githubusercontent.com/vexascripts/Roblox-Scripts/refs/heads/main/Stick%20Battles%20ðŸ¢'))()
                end
            }
        }
    },
    ["1215581239"] = {
        Name = "DoomSpire Brickbattle",
        Version = "Stable",
        Scripts = {
            {
                Name = "DoomSpire Script",
                Description = "Complete DoomSpire automation",
                Code = function()
                    loadstring(game:HttpGet("https://raw.githubusercontent.com/vexascripts/Roblox-Scripts/refs/heads/main/DoomSpire"))()
                end
            }
        }
    }
}

-- Detect current game
local CurrentGameId = tostring(game.PlaceId)
local CurrentGame = GameDatabase[CurrentGameId]

-- Create Window
local Window = Fluent:CreateWindow({
    Title = "Script Hub Premium " .. (CurrentGame and "- " .. CurrentGame.Name or ""),
    SubTitle = "by VexaScripts",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

-- Create Tabs
local Tabs = {
    Current = Window:AddTab({ Title = "Current Game", Icon = "gamepad-2" }),
    Browser = Window:AddTab({ Title = "Game Browser", Icon = "list" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

-- Current Game Tab
if CurrentGame then
    Tabs.Current:AddParagraph({
        Title = "Detected: " .. CurrentGame.Name,
        Content = "Version: " .. CurrentGame.Version .. "\nGame ID: " .. CurrentGameId .. "\n\nSelect a script version below:"
    })
    
    for i, script in ipairs(CurrentGame.Scripts) do
        Tabs.Current:AddButton({
            Title = script.Name,
            Description = script.Description,
            Callback = function()
                Fluent:Notify({
                    Title = "Loading Script",
                    Content = "Executing " .. script.Name .. "...",
                    Duration = 3
                })
                script.Code()
            end
        })
    end
else
    Tabs.Current:AddParagraph({
        Title = "No Script Available",
        Content = "This game is not currently supported.\nGame ID: " .. CurrentGameId .. "\n\nCheck the Game Browser for available games!"
    })
    
    Tabs.Current:AddButton({
        Title = "Copy Game ID",
        Description = "Copy this game's ID to clipboard",
        Callback = function()
            setclipboard(CurrentGameId)
            Fluent:Notify({
                Title = "Copied",
                Content = "Game ID copied to clipboard",
                Duration = 2
            })
        end
    })
end

-- Game Browser Tab
Tabs.Browser:AddParagraph({
    Title = "Available Games",
    Content = "Browse all supported games and their scripts"
})

-- Sort games for better display
local sortedGames = {}
for gameId, gameData in pairs(GameDatabase) do
    table.insert(sortedGames, {id = gameId, data = gameData})
end

for _, game in ipairs(sortedGames) do
    local gameId = game.id
    local gameData = game.data
    
    local GameSection = Tabs.Browser:AddSection(gameData.Name)
    
    Tabs.Browser:AddParagraph({
        Title = gameData.Version,
        Content = "Game ID: " .. gameId .. "\nScripts Available: " .. #gameData.Scripts
    })
    
    -- Display scripts for this game
    for i, script in ipairs(gameData.Scripts) do
        Tabs.Browser:AddButton({
            Title = script.Name,
            Description = script.Description,
            Callback = function()
                if tostring(game.PlaceId) == gameId then
                    Fluent:Notify({
                        Title = "Loading Script",
                        Content = "Executing " .. script.Name .. "...",
                        Duration = 3
                    })
                    script.Code()
                else
                    Fluent:Notify({
                        Title = "Wrong Game",
                        Content = "You need to be in " .. gameData.Name .. " to use this script. Join using the button below.",
                        Duration = 5
                    })
                end
            end
        })
    end
    
    -- Join Game Button
    Tabs.Browser:AddButton({
        Title = "Join " .. gameData.Name,
        Description = "Teleport to this game now",
        Callback = function()
            Fluent:Notify({
                Title = "Joining Game",
                Content = "Teleporting to " .. gameData.Name .. "...",
                Duration = 3
            })
            game:GetService("TeleportService"):Teleport(tonumber(gameId), game.Players.LocalPlayer)
        end
    })
end

-- Full Game List Section
Tabs.Browser:AddSection("Quick Reference")
local gameList = {}
local totalScripts = 0
for id, data in pairs(GameDatabase) do
    totalScripts = totalScripts + #data.Scripts
    table.insert(gameList, data.Name .. " - " .. #data.Scripts .. " script" .. (#data.Scripts > 1 and "s" or ""))
end

Tabs.Browser:AddParagraph({
    Title = "Statistics",
    Content = "Total Games: " .. #gameList .. "\nTotal Scripts: " .. totalScripts .. "\n\n" .. table.concat(gameList, "\n")
})

-- Settings Tab
Tabs.Settings:AddSection("Execution Settings")

local AutoExecute = Tabs.Settings:AddToggle("AutoExecute", {
    Title = "Auto Execute on Join",
    Description = "Automatically run the first script when joining supported games",
    Default = false
})

local Notifications = Tabs.Settings:AddToggle("Notifications", {
    Title = "Show Notifications",
    Description = "Display script execution and status notifications",
    Default = true
})

Tabs.Settings:AddSection("Server Controls")

Tabs.Settings:AddButton({
    Title = "Rejoin Server",
    Description = "Rejoin the current server (same players)",
    Callback = function()
        Fluent:Notify({
            Title = "Rejoining",
            Content = "Reconnecting to server...",
            Duration = 2
        })
        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, game.Players.LocalPlayer)
    end
})

Tabs.Settings:AddButton({
    Title = "Server Hop",
    Description = "Join a different random server",
    Callback = function()
        Fluent:Notify({
            Title = "Server Hopping",
            Content = "Finding new server...",
            Duration = 2
        })
        local success, servers = pcall(function()
            return game:GetService("HttpService"):JSONDecode(
                game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100")
            )
        end)
        
        if success and servers.data and servers.data[1] then
            game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, servers.data[1].id, game.Players.LocalPlayer)
        else
            Fluent:Notify({
                Title = "Error",
                Content = "Could not find available servers",
                Duration = 3
            })
        end
    end
})

Tabs.Settings:AddSection("Configuration")

-- Save Manager
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)
SaveManager:BuildConfigSection(Tabs.Settings)
InterfaceManager:BuildInterfaceSection(Tabs.Settings)

Tabs.Settings:AddSection("About")

Tabs.Settings:AddParagraph({
    Title = "Script Hub Premium",
    Content = "Created by VexaScripts\nVersion: 2.0\n\nSupports automatic game detection and script execution.\n\nMinimize: Left Ctrl"
})

-- Save config
SaveManager:LoadAutoloadConfig()

-- Auto Execute Feature
if AutoExecute.Value and CurrentGame then
    task.wait(2)
    if CurrentGame.Scripts[1] then
        if Notifications.Value then
            Fluent:Notify({
                Title = "Auto Execute",
                Content = "Running " .. CurrentGame.Scripts[1].Name,
                Duration = 3
            })
        end
        CurrentGame.Scripts[1].Code()
    end
end

-- Welcome Notification
Fluent:Notify({
    Title = "Script Hub Loaded",
    Content = CurrentGame and ("Detected: " .. CurrentGame.Name .. "\n" .. #CurrentGame.Scripts .. " scripts available") or ("Universal Mode\nGame ID: " .. CurrentGameId),
    Duration = 5
})

print("Script Hub Premium - Loaded")
print("Game: " .. (CurrentGame and CurrentGame.Name or "Unknown"))
print("Game ID: " .. CurrentGameId)
print("Scripts: " .. (CurrentGame and #CurrentGame.Scripts or 0))
